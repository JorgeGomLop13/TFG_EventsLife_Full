<app-header [booksList]="booksList"></app-header>

<div class="max-w-3xl mx-auto mt-10 px-4">
    <h1 class="text-2xl font-bold text-black mb-6 flex items-center gap-2">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M8.5 19C9.32843 19 10 19.6716 10 20.5C10 21.3284 9.32843 22 8.5 22C7.67157 22 7 21.3284 7 20.5C7 19.6716 7.67157 19 8.5 19ZM17.5 19C18.3284 19 19 19.6716 19 20.5C19 21.3284 18.3284 22 17.5 22C16.6716 22 16 21.3284 16 20.5C16 19.6716 16.6716 19 17.5 19ZM3 2H5C5.4556 2 5.84831 2.30684 5.96506 2.73774L5.98837 2.84794L6.4733 6H21C21.5998 6 22.0549 6.52068 21.9951 7.10035L21.9762 7.21693L20.3242 14.6508C20.0325 15.9637 18.9059 16.9143 17.5779 16.9945L17.3957 17H8.71584C7.29435 17 6.07697 16.0044 5.78265 14.6299L5.75072 14.4562L4.14208 4H3C2.44772 4 2 3.55228 2 3C2 2.48716 2.38604 2.06449 2.88338 2.00673L3 2H5H3ZM19.7534 8H6.781L7.72747 14.1521C7.79674 14.6024 8.15973 14.9438 8.60337 14.9937L8.71584 15H17.3957C17.8253 15 18.2021 14.7265 18.3402 14.3285L18.3718 14.2169L19.7534 8Z"
                fill="black"
            />
        </svg>
        {{ "CART.TITLE" | translate }}
    </h1>
    <!--Si no hay libros se muestra este mensaje-->
    <div *ngIf="booksInCart.length === 0" class="text-center text-gray-400 mt-10">
        <p class="text-lg">{{ "CART.EMPTY" | translate }}</p>
        <p class="text-sm mt-1">{{ "CART.ADD_HINT" | translate }}</p>
    </div>

    <div
        *ngFor="let book of booksInCart"
        class="bg-gray-900 text-white rounded-2xl shadow-lg overflow-hidden mb-6 border border-gray-700 transition hover:shadow-2xl"
    >
        <div class="px-6 py-3 border-b border-gray-700 flex justify-between items-center">
            <h2 class="text-lg font-semibold truncate">{{ book.name }}</h2>
            <span class="text-green-400 font-medium">{{ book.price | currency : "EUR" }}</span>
        </div>

        <div class="p-6 flex gap-4">
            <img class="w-28 h-28 object-cover rounded-lg border border-gray-700 shadow" [src]="book.image" [alt]="book.name" />

            <div class="flex-1 flex flex-col justify-between">
                <div>
                    <h3 class="text-md font-semibold">{{ book.author }}</h3>
                    <p class="text-sm text-gray-400 mt-1 line-clamp-3">{{ book.description }}</p>
                    <div class="mt-2 flex items-center text-xs text-gray-500">
                        <svg class="w-4 h-4 mr-1 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M4 4h12v12H4z" />
                        </svg>
                        {{ book.pages }} {{ "CART.PAGES" | translate }}
                    </div>
                </div>

                <div class="mt-4 flex justify-end gap-2">
                    <button
                        class="px-4 py-1.5 bg-red-600 hover:bg-red-500 text-sm font-medium rounded-md transition"
                        (click)="deleteBookShoping(book.id)"
                    >
                        {{ "CART.DELETE" | translate }}
                    </button>
                    <button
                        class="px-4 py-1.5 bg-green-600 hover:bg-green-500 text-sm font-medium rounded-md transition"
                        (click)="payForProduct(book.id, book.price, book.name, book.author_id)"
                    >
                        {{ "CART.PAY" | translate }}
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
